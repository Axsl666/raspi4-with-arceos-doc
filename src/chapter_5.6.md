# USB 介绍

USB（Universal Serial Bus，通用串行总线）是一种用于在计算机系统和外部设备之间传输数据的标准化通信协议和连接接口。USB最初设计用于简化计算机和外部设备之间的连接，并提高设备的可用性。

* **通用性**： USB是一种通用的连接标准，适用于各种设备，包括打印机、键盘、鼠标、摄像头、移动设备等。
* **插拔性**： USB支持热插拔，可以在计算机运行时连接或断开USB设备而无需重启计算机。
* **高带宽和速度**： USB提供不同版本，包括USB 1.0、USB 2.0、USB 3.0、USB 3.1和USB4.0等，每个版本具有不同的数据传输速度和带宽。USB 3.0及更高版本支持更快的数据传输速度。
* **电力供应**： USB接口不仅传输数据，还可以为连接的设备提供电力。这使得许多小型设备无需额外的电源适配器即可正常工作。
* **连接类型**： USB连接器有多种形状和尺寸，Type-A、Type-B、Micro-USB、USB-C等， USB-C是一种可逆连接器，可以在任何方向上插入。
* **传输类型**： USB支持不同类型的数据传输，包括控制传输、批量传输、等时传输和中断传输。

## 拓扑结构



## USB host

任何 USB 系统中只有一个主机。主机系统的 USB 接口被称为主机控制器。主机控制器可以以硬件，固件或软件的组合来实现。根集线器集成在主机系统内以提供一个或多个连接点。USB Host 通过 Host Controller 与 USB device 交互。

Host 主要负责:检测 USB 设备拔插管理 Host 和 Device 之间的控制流、数据流收集 USB 总线状态和活动数据信息为连入 USB 总线的设备供电。

USB Host的工作原理是通过发送和接收USB数据包来与USB设备进行通信。

## USB Host Controller

**Host Controller**（主机控制器）是指在计算机系统中负责管理和控制USB总线的硬件或芯片。USB主机控制器的作用是与连接到计算机的USB设备进行通信，协调数据传输，并提供电源管理等功能。

* 设备管理： 主机控制器负责检测和管理连接到计算机的USB设备。当用户连接USB设备时，主机控制器负责识别设备并与其建立通信。
* 数据传输： 主机控制器协调数据在USB总线上的传输。它处理USB设备之间的数据传输请求，确保数据以正确的速率和顺序进行传输。
* 电源管理： USB主机控制器负责为连接的USB设备提供电力。它可以根据需要为设备提供适当的电流，并在设备不再需要电力时进行断电。
* 错误处理： 主机控制器能够处理USB总线上发生的错误，以确保稳定的数据传输。
* 协议支持： USB主机控制器需要支持USB规范中定义的各种协议，以确保与不同类型的USB设备的兼容性。

## USB device

USB device 可以分为 USB hub 和 USB function。

* USB Hub

Hub 提供了一种低成本、低复杂度的 USB 接口扩展方法。HUB 的上行 Port 面向Host，下行 Port 面向设备(Hub 或功能设备)。在下行 Port 上，Hub 提供了设备连接检测和设备移除检测的能力，并给各下行 Port 供电。Hub 可以单独使能各下行 Port。

* USB function

能够通过总线传输或接收数据或控制信息的设备





